$(function(){$(".scrumboard"),$(".scrumboard .card");function u(){$('[data-sortable="true"]').sortable({connectWith:".connect-sorting-content",items:".card",cursor:"move",placeholder:"ui-state-highlight",refreshPosition:!0,stop:function(e,t){t.item.parent().attr("data-section")},update:function(e,t){}})}function g(){$(".addTask").on("click",function(e){e.preventDefault();let t=$(this).parents('[data-connect="sorting"]').attr("data-section");$(".edit-task-title").hide(),$(".add-task-title").show(),$('[data-btnfn="addTask"]').show(),$('[data-btnfn="editTask"]').hide(),$("#addTaskModal").modal("show"),m(t)})}$("#progress-range-counter").on("input",function(e){e.preventDefault(),getRangeValue=$(this).val(),$(".range-count-number").html(getRangeValue),$(".range-count-number").attr("data-rangeCountNumber",getRangeValue)}),$("#addTaskModal, #addListModal").on("hidden.bs.modal",function(e){$("input,textarea").val(""),$('input[type="range"]').val(0),$(".range-count-number").attr("data-rangecountnumber",0),$(".range-count-number").html(0)});function m(e){$('[data-btnfn="addTask"]').off("click").on("click",function(t){$(this).attr("class").split(" ")[1];var a=new Date,i=String(a.getDate()).padStart(2,"0"),n=String(a.getMonth()),r=a.getFullYear(),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a=i+" "+d[n]+", "+r;var o=e,s=document.getElementById("s-task").value,l=document.getElementById("s-text").value;$(".range-count-number").attr("data-rangeCountNumber");let h;l==""?h='<div data-draggable="true" class="card task-text-progress" style=""><div class="card-body"><div class="task-header"><div class=""><h4 class="" data-taskTitle="'+s+'">'+s+'</h4></div><div class=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2 s-task-edit"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></div></div><div class="task-body"><div class="task-bottom"><div class="tb-section-1"><span data-taskDate="'+a+'"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg> '+a+'</span></div><div class="tb-section-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2 s-task-delete"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></div></div></div></div></div>':h='<div data-draggable="true" class="card task-text-progress" style=""><div class="card-body"><div class="task-header"><div class=""><h4 class="" data-taskTitle="'+s+'">'+s+'</h4></div><div class=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2 s-task-edit"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></div></div><div class="task-body"><div class="task-content"><p class="" data-taskText="'+l+'">'+l+'</p></div><div class="task-bottom"><div class="tb-section-1"><span data-taskDate="'+a+'"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg> '+a+'</span></div><div class="tb-section-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2 s-task-delete"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></div></div></div></div></div>',$("[data-section='"+o+"'] .connect-sorting-content").append(h),$("#addTaskModal").modal("hide"),v(),c()})}$("#add-list").off("click").on("click",function(e){e.preventDefault(),$(".add-list").show(),$(".edit-list").hide(),$(".edit-list-title").hide(),$(".add-list-title").show(),$("#addListModal").modal("show")}),$(".add-list").off("click").on("click",function(e){var t=new Date,a=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();t=i+"."+a+"."+n;var r=document.getElementById("s-list-name").value,d=r.toLowerCase(),o=d.split(" ").join("_"),s=o;let l='<div data-section="s-'+s+'" class="task-list-container  mb-4 " data-connect="sorting"><div class="connect-sorting"><div class="task-container-header"><h6 class="s-heading" data-listTitle="'+r+'">'+r+'</h6><div class="dropdown"><a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink-4" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a><div class="dropdown-menu dropdown-menu-right left" aria-labelledby="dropdownMenuLink-4"><a class="dropdown-item list-edit" href="javascript:void(0);">Edit</a><a class="dropdown-item list-delete" href="javascript:void(0);">Delete</a><a class="dropdown-item list-clear-all" href="javascript:void(0);">Clear All</a></div></div></div><div class="connect-sorting-content" data-sortable="true"></div><div class="add-s-task"><a class="addTask"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg> Add Task</a></div></div></div>';$(".task-list-section").append(l),$("#addListModal").modal("hide"),$("#s-list-name").val(""),u(),p(),k(),f(),g(),v(),c()});function k(){$(".list-delete").off("click").on("click",function(e){e.preventDefault(),$(this).parents("[data-connect]").remove()})}function p(){$(".list-edit").off("click").on("click",function(e){e.preventDefault();var t=$(this);$(".add-list").hide(),$(".edit-list").show(),$(".add-list-title").hide(),$(".edit-list-title").show();var a=t.parents('[data-connect="sorting"]').find(".s-heading").attr("data-listTitle");$("#s-list-name").val(a),$(".edit-list").off("click").on("click",function(i){$(this);var n=document.getElementById("s-list-name").value;t.parents('[data-connect="sorting"]').find(".s-heading").html(n),t.parents('[data-connect="sorting"]').find(".s-heading").attr("data-listTitle",n),$("#addListModal").modal("hide"),$("#s-list-name").val("")}),$("#addListModal").modal("show"),$("#addListModal").on("hidden.bs.modal",function(i){$("#s-list-name").val("")})})}function f(){$(".list-clear-all").off("click").on("click",function(e){e.preventDefault(),$(this).parents('[data-connect="sorting"]').find(".connect-sorting-content .card").remove()})}function c(){$(".card .s-task-delete").off("click").on("click",function(e){e.preventDefault();let t=$(this).parents(".card");$("#deleteConformation").modal("show"),$('[data-remove="task"]').on("click",function(a){a.preventDefault(),t.remove(),$("#deleteConformation").modal("hide")})})}function v(){$(".card .s-task-edit").off("click").on("click",function(e){e.preventDefault();var t=$(this);$(".add-task-title").hide(),$(".edit-task-title").show(),$('[data-btnfn="addTask"]').hide(),$('[data-btnfn="editTask"]').show();var a=t.parents(".card").find("h4").attr("data-taskTitle");$(".task-text-progress #s-task").val(a);var i=t.parents(".card").find('p:not(".progress-count")').attr("data-taskText");$(".task-text-progress #s-text").val(i);var n=t.parents(".card").find("div.progress-bar").attr("data-progressState");$("#progress-range-counter").val(n),$(".range-count-number").html(n),$(".range-count-number").attr("data-rangecountnumber",n),$('[data-btnfn="editTask"]').off("click").on("click",function(r){$(this);var d=document.getElementById("s-task").value,o=document.getElementById("s-text").value,s=$(".range-count-number").attr("data-rangeCountNumber");t.parents(".card").find("h4").attr("data-taskTitle",d),t.parents(".card").find("h4").html(d),t.parents(".card").find('p:not(".progress-count")').attr("data-tasktext",o),t.parents(".card").find('p:not(".progress-count")').html(o),t.parents(".card").find("div.progress-bar").attr("style","width: "+s+"%"),t.parents(".card").find("div.progress-bar").attr("data-progressState",s),t.parents(".card").find("div.progress-bar").attr("aria-valuenow",s),t.parents(".card").find(".progress-count").html(s+"%"),$("#addTaskModal").modal("hide"),$(".taskDate").html(""),$(".taskDate").hide()}),$("#addTaskModal").modal("show")})}p(),k(),f(),g(),v(),c(),u()});
